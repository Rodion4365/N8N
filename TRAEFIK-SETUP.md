# –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ n8n —Å Traefik

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤, –≥–¥–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **Traefik** –∫–∞–∫ reverse proxy.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ Traefik —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ä—Ç–∞–º–∏ 80/443
- ‚úÖ DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `n8n.callwithbot.ru` ‚Üí IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –£ Traefik –Ω–∞—Å—Ç—Ä–æ–µ–Ω Let's Encrypt (certresolver=letsencrypt)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
cd ~
git clone https://github.com/Rodion4365/N8N.git
cd N8N
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏
nano .env
```

**–í–ê–ñ–ù–û!** –ò–∑–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `.env`:
- `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è PostgreSQL
- `N8N_BASIC_AUTH_USER` - –ª–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞ –≤ n8n
- `N8N_BASIC_AUTH_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ n8n
- `TRAEFIK_NETWORK` - –∏–º—è —Å–µ—Ç–∏ Traefik (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `infra_default`)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º—è —Å–µ—Ç–∏ Traefik

–£–∑–Ω–∞–π—Ç–µ –∏–º—è —Å–µ—Ç–∏, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω Traefik:

```bash
docker network ls
```

–ù–∞–π–¥–∏—Ç–µ —Å–µ—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç Traefik (–æ–±—ã—á–Ω–æ —ç—Ç–æ `infra_default`, `traefik_default` –∏–ª–∏ –ø–æ—Ö–æ–∂–µ–µ –∏–º—è).

–ï—Å–ª–∏ –∏–º—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `infra_default`, –æ–±–Ω–æ–≤–∏—Ç–µ `TRAEFIK_NETWORK` –≤ `.env`:

```bash
nano .env
# –ò–∑–º–µ–Ω–∏—Ç–µ TRAEFIK_NETWORK –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å n8n

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs -f
```

–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ n8n –∑–∞–ø—É—â–µ–Ω:
```
n8n ready on 0.0.0.0:5678
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **https://n8n.callwithbot.ru**

Traefik –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
- –ù–∞—Å—Ç—Ä–æ–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS
- –ë—É–¥–µ—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ n8n

–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –∏–∑ `.env` —Ñ–∞–π–ª–∞, –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å n8n!

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

n8n –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏:

| –°–µ—Ä–≤–∏—Å | –ü–∞–º—è—Ç—å (–º–∞–∫—Å) | CPU (–º–∞–∫—Å) |
|--------|---------------|------------|
| PostgreSQL | 384MB | 0.5 —è–¥—Ä–∞ |
| n8n | 768MB | 1.0 —è–¥—Ä–æ |
| **–ò—Ç–æ–≥–æ** | **~1.15GB** | **~1.5 —è–¥—Ä–∞** |

–≠—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ n8n

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
./n8n-manage.sh status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
./n8n-manage.sh logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./n8n-manage.sh restart

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
./n8n-manage.sh stop

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
./n8n-manage.sh start

# –û–±–Ω–æ–≤–∏—Ç—å n8n (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –±—ç–∫–∞–ø–æ–º)
./n8n-manage.sh update

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
./n8n-manage.sh backup

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
./n8n-manage.sh help
```

## üóÑÔ∏è –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ:

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø
./n8n-manage.sh backup

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker compose exec -T postgres pg_dump -U n8n_user n8n > backup_$(date +%Y%m%d).sql
```

–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
./n8n-manage.sh restore backup_20260117.sql
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ n8n

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:

```bash
./n8n-manage.sh update
```

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### n8n –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs n8n

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PostgreSQL
docker compose logs postgres
```

### Traefik –Ω–µ –≤–∏–¥–∏—Ç n8n

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏
docker inspect n8n | grep -A 10 Networks

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å labels Traefik
docker inspect n8n | grep -A 20 Labels

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Traefik
docker logs infra-reverse-proxy-1
```

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ—Ç—å Traefik

```bash
# –£–∑–Ω–∞—Ç—å –≤—Å–µ —Å–µ—Ç–∏
docker network ls

# –£–∑–Ω–∞—Ç—å –∫ –∫–∞–∫–æ–π —Å–µ—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω Traefik
docker inspect infra-reverse-proxy-1 | grep -A 10 Networks

# –û–±–Ω–æ–≤–∏—Ç—å TRAEFIK_NETWORK –≤ .env
nano .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å n8n
docker compose down
docker compose up -d
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å SSL

Traefik –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
   ```bash
   nslookup n8n.callwithbot.ru
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Traefik:
   ```bash
   docker logs infra-reverse-proxy-1
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ certresolver –≤ labels —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Traefik (–æ–±—ã—á–Ω–æ `letsencrypt`)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ `.env`
2. ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ n8n: `./n8n-manage.sh update`
3. ‚úÖ –î–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏: `./n8n-manage.sh backup`
4. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏: `./n8n-manage.sh logs`
5. ‚úÖ –í–∫–ª—é—á–∏—Ç–µ firewall (ufw) –¥–ª—è SSH –∏ –¥—Ä—É–≥–∏—Ö –ø–æ—Ä—Ç–æ–≤

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–∏ Docker
docker network ls

# –û—á–∏—Å—Ç–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã
docker system prune -a

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
docker compose exec postgres psql -U n8n_user -d n8n

# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä n8n
docker compose exec n8n /bin/sh
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à n8n –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: **https://n8n.callwithbot.ru**

–ù–∞—á–Ω–∏—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ workflow!

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è n8n](https://docs.n8n.io)
- [n8n Community Forum](https://community.n8n.io)
- [Traefik –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://doc.traefik.io/traefik/)
